{% extends 'base.html' %}
{% block content %}
{% if messages %}
  <ul>
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}
<h2>Set New Password</h2>
<form method="post">
  {% csrf_token %}
  <div>
    <label for="password1">New password</label>
    <input type="password" name="password1" id="password1" required />
    <button type="button" id="toggle1">Show</button>
  </div>
  <div>
    <label for="password2">Confirm password</label>
    <input type="password" name="password2" id="password2" required />
    <button type="button" id="toggle2">Show</button>
  </div>
  <button type="submit">Update Password</button>
</form>

<script>
  (function() {
    function hook(id, btnId) {
      var input = document.getElementById(id);
      var btn = document.getElementById(btnId);
      if (input && btn) {
        btn.addEventListener('click', function(){
          var isText = input.type === 'text';
          input.type = isText ? 'password' : 'text';
          btn.textContent = isText ? 'Show' : 'Hide';
        });
      }
    }
    hook('password1', 'toggle1');
    hook('password2', 'toggle2');
  })();
</script>
{% endblock %}


